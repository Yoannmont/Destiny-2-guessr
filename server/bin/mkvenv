#!/bin/bash

SCRIPT_DIR="$(cd "$(dirname "${BASH_SOURCE[0]}")" && pwd)"
BACKEND_DIR="$(dirname "$SCRIPT_DIR")"

ENV_DIR="$BACKEND_DIR/env"
MODE=${1:-dev}

if [ -d "$ENV_DIR" ]; then
    echo "Deleting found env"
    rm -rf "$ENV_DIR"
fi

virtualenv "$ENV_DIR" -p python3.12

source "$ENV_DIR/bin/activate"

# installing uv
pip install uv

# installing dependencies
uv pip sync requirements.lock